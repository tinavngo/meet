<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8"/>
        <meta http-equiv="x-ua-compatible" content="ie=edge"/>
        <meta name="viewport" content="width=device-width"/>
        <title>Test Auth Server</title>
    </head>
    <body>
        <style>
            #container {
              max-width: 500px;
            }
            h4 {
              margin-top: 25px;
            }
          </style>
      
      
          <main id="container">
            <h1>OAuth2 Test</h1>
              <h4><b>Step 1:</b> Get the Auth URL</h4>
              <p>Click the button below to get your auth url.</p>
              <button id="getAuthUrlButton">Get OAuth URL</button>
              <p id="result"></p>
              <a id="authURL" href target="_blank">Click to authorize</a>
          </main>
          <!-- New line of Code for Script starts here-->
          <script type="text/javascript">
            const getAuthUrlButton = document.getElementById("getAuthUrlButton");
            const resultElement = document.getElementById("result");
            const resultLink = document.getElementById("authURL");
            const getAuthURL = "https://do1hq8sag2.execute-api.us-west-1.amazonaws.com/dev/api/get-auth-url";

            getAuthUrlButton.onclick = function () {
                fetch(getAuthURL)
                    .then(function (response) {
                        return response.json();
                    })
                    .then(function(json) {
                        const result = JSON.stringify(json);
                        // Get the value of authUrl
                        const { authUrl } = JSON.parse(result);
                        // Then add it to the html
                        resultElement.innerText = result;
                        resultLink.href = authUrl;
                    });
            };
          </script>
    </body>
</html>